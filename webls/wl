#!/usr/bin/env nu

const webls_root = '/home/eltahawy';
const webls_port = 3000;

const envs = {
	"WEBLS_ROOT":$webls_root,
	"WEBLS_PORT":$webls_port,
};

def "main dev" [root? : path,port? : number] {
  if $root == null {
    $envs | load-env     
    cargo leptos watch
  } else if $root != null and $port == null {
    $envs | load-env     
    cargo leptos watch -- $root
  } else {
    cargo leptos watch -- $root $port
  }
}

def "main build" [] {
    cargo leptos build
}

def "main release" [] {
    cargo leptos build --release
}

def main [] {}
